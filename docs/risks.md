# 懸念事項リスト（risks.md）

懸念事項の管理ファイル。不変条件（IF）は `docs/constitution/` を参照。

---

## 懸念事項

### C-001 密集地で痕跡がノイズ化して役に立たない

* **懸念**: 人が多い場所（避難所・都市部）では痕跡が過多になり、現場で使えない。
* **致命化条件**:
  * 「周辺の痕跡をそのまま一覧」しかできない
  * 自動フィルタで落とす（取りこぼし） or UIが破綻する
* **解決案（方向性）**:
  * **"消さずに畳む"**: 全件到達可能を保ったまま、要約/順位付け/クラスタで表示を縮退（ドリルダウン必須）
  * **縮退モードの明文化**: 密では「上位N＋要約」になるが、ロスレス経路は残す
* **前提**: IF-LOSSLESS-001
* **案無し（不可能領域）**: 密集地で「生痕跡を全部わかりやすく同時表示」すること自体は現実的に無理

---

### C-002 抽象的な挙動仕様が未定義（寄り分けの定義がない）

* **懸念**: 「雑多なノイズの中から被災者をどう寄り分けるか」が定義できていない。
* **解決案（方向性）**: 寄り分けを一枚岩にせず **モード分離**する
  * **対象キー探索**: 確定対象を追う（高精度・高速）→ **同一性・特定あり得る**
  * **オープン探索**: キー無しで候補を拾う → **「存在のみ」（同一性に至らない）**
* **前提**: IF-SEARCH-001
* **OPEN**:
  * オープン探索の「存在」の粒度（エリア？時間窓？）
  * 候補生成の根拠への到達経路

---

### C-003 「取りこぼしゼロ」をどう定義するか（死に直結する恐れ）

* **懸念**: 「取りこぼし＝死」になり得るので、仕様として厳密に定義したいが難しい。
* **重要な整理**:
  * **不可能**: 現実の被災者全体に対して"取りこぼしゼロ"（痕跡がそもそも無いケースがある）
  * **仕様化可能**: **観測された痕跡に対して"取りこぼしゼロ"**
* **解決案（方向性）**: IF-LOSSLESS-001 として不変条件化済み

---

### C-004 対象キーに寄せると、一人暮らし等の孤立者が見えない

* **懸念**: 家族共有や救助IDが前提だと、孤立者を"見えない設計"にしてしまう。
* **解決案（方向性）**: **対象キー探索だけにしない**（C-002の二段構えで受ける）
  * オープン探索で「存在」を拾える余地を残す
  * ただし「存在のみ」なので、孤立者の**特定**はオープン探索だけでは不可能
* **前提**: IF-SEARCH-001
* **OPEN**: 「存在」から「特定」への昇格パス（誰が/どの権限で/どの手続きで）

---

### C-005 疎の状況では「無関係な第三者が通る」ことが価値になる

* **懸念**: 密ではノイズでも、疎では第三者の通過・中継が救助の入口になり得る。
* **解決案（方向性）**: オープン探索の価値を **疎で最大化**し、密では **縮退**する
  * 同じ機能を一律にせず、環境（密/疎）でUI/提示を変える（ただしロスレス経路は不変）
* **前提**: IF-LOSSLESS-001
* **OPEN**: 密/疎の判定をどう扱うか（自動/手動/状況タグ）

---

### C-006 プライバシー・悪用（オープン探索ほど現実化しやすい）

* **懸念（具体例）**:
  * ストーキング/DV（避難先・生活圏推定）
  * 空き巣（不在推定）
  * 失踪者/未成年等の所在暴露
  * 善意の誤特定→拡散→炎上/現場混乱
  * 詐欺（"痕跡が見えた"を材料に社会工学）
  * 救助妨害（偽情報・誘導）
* **解決案（方向性）**:
  * **IF-SEARCH-001 を前提として採用**: オープン探索は「存在のみ」、同一性・特定は対象キー探索のみ
  * これにより、オープン探索経由での悪用シナリオ（ストーキング、空き巣等）の**直接的な成立を阻止**
  * 対象キー探索は「キー保持者のみ」なので、悪用には「キーの不正取得」が必要（別の防御層）
* **前提**: IF-SEARCH-001
* **残存リスク**:
  * 「存在のみ」でも、時空間粒度が細かすぎると推定可能になる（→ RISK-PRIV-001）
  * **「不在」の推定は「存在のみ」でも防げない**（空き巣等）
    * 「この場所に痕跡が無い」＝「不在の可能性が高い」は同一性不要で成立
  * キーの不正取得・漏洩（対象キー探索の悪用）
  * 権限を持つ救助者の悪用（内部犯行）

---

### C-007 （派生）オープン探索が"候補"を増やしすぎて現場負荷・誤報を増やす

* **懸念**: 取りこぼし恐怖で候補を広げるほど、救助リソースが吸われる/混乱する。
* **解決案（方向性）**:
  * 候補は消さないが **順位付けとクラスタリングで"当たり先"を提示**（＝作業導線を作る）
  * "候補の確度"を明示し、運用上の期待値を壊さない
* **前提**: IF-LOSSLESS-001
* **OPEN**: 確度（スコア）の意味をどう定義するか（アルゴリズムの話ではなく「表示上の意味」）

---

## RISK（停止が必要な危険領域）

### RISK-PRIV-001: オープン探索の粒度が細かすぎると同一性推定が可能になる

* **影響**: IF-SEARCH-001 の「存在のみ」が実質的に破れ、悪用シナリオが現実化
* **対策方針**: 粒度の下限を設計時に決定
* **人間判断必須**: プライバシー重大影響のため、設計確定前に mini RFC 必須

---

## OPEN（未解決の設計判断）

| ID | 内容 | 関連懸念 |
|----|------|----------|
| OPEN-001 | オープン探索の「存在」の粒度（エリア？時間窓？） | C-002, C-006 |
| OPEN-002 | 「存在」から「特定」への昇格パス（誰が/どの権限で/どの手続きで） | C-004 |
| OPEN-003 | 密/疎の判定方法（自動/手動/状況タグ） | C-005 |
| OPEN-004 | 確度（スコア）の表示上の意味 | C-007 |
| OPEN-005 | オープン探索で履歴/パターン/ベースラインを返すか否か | C-006 |

---

## 暫定まとめ（合意候補）— 挙動原則

1. **寄り分けは「除外」ではなく「整理」**（消さずに畳む）
2. **取りこぼしゼロは「観測された痕跡が到達不能にならない」意味で定義**（IF-LOSSLESS-001）
3. **探索は二段構え**: 対象キー探索（確定）＋オープン探索（候補生成）
4. **悪用防止の臨界点**（IF-SEARCH-001）:
   * オープン探索 → 「存在のみ」
   * 対象キー探索 → 「同一性・特定あり得る」
5. **密では縮退、疎では価値が出る**（ただしロスレス経路は不変）
6. **最大の難所はプライバシー/悪用耐性**（RISK-PRIV-001 として管理）
