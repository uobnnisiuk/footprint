# Idea Backlog（後発検討アイデア帳）

---

## IDEA-0001: 「落とし物タグ（BLEタグ）を救助ビーコンとして活用」
- 状態: Draft
- 優先度: P1（有用）
- 追加対象フェーズ: 平時 / 発災直後 / 捜索・救助
- 作成日: 2026-01-30
- 作成者: Assistant（ユーザ起点アイデアを補完）

### 1. ねらい（1〜2行）
- スマホが破損・電池切れ・アプリ未起動でも、被災者の周辺に「拾える電波源」を残し、捜索の手がかりを増やす。
- 平時から“持っているだけ”で準備になる導線を作り、参加障壁を下げる。

### 2. ざっくり案（どう動く？）
**ユーザ視点**
1) 被災リスクのある人がタグを持ち歩く（鍵/バッグ/子供/高齢者など）
2) 平時は特に操作不要（任意でアプリに「タグ登録」だけ）
3) 災害時、救助側が近傍探索するとタグ電波を検出し、捜索補助に使える

**システム視点**
- 救助側アプリ（または探索モード）で周辺BLE広告をスキャン
- 方式は2ルート：
  - ルートA: **汎用BLE広告を出せるタグ**を採用し、広告内のID/署名を解釈する
  - ルートB: タグはブラックボックスでも良いと割り切り、**“電波源としての存在”**だけを検出しRSSIで近接誘導する（ID解釈なし）

### 3. 前提・依存
- 必須：救助側（または協力者側）端末でBLEスキャンができること
- 望ましい：タグが「固定ID」「メーカー固有データ」「発信間隔」などを制御できる、もしくは少なくとも安定して広告を出すこと
- 依存：タグ製品の仕様（暗号化・IDローテーション・検出制限）／OSのバックグラウンド制約

### 4. 成立条件（採用ゲート：Yes/No）
- 観測可能性: 主要端末（iOS/Android数機種）で、近距離（例: 10m以内）で安定検出できる
- 意味抽出（ルートAの場合）: 広告から「識別子（または登録済み判定）」が取り出せる
- 誤検知耐性: “第三者が同じIDを偽装して誤誘導”しにくい（署名/登録照合/物理所有前提など）
- 運用可能性: 電池寿命が現実的（例: 数か月〜年単位）、ユーザ運用が簡単
- 法/倫理: 追跡悪用の抑制策（IDローテーション/同意/探索者の権限制御 等）が設計できる

### 5. 期待できる効果
- スマホ死亡ケースに対して「最後の手がかり」を増やす（発見率向上の可能性）
- 平時運用を“持つだけ”に近づけ、参加の裾野を広げやすい

### 6. 主なリスク（上位3つ）
1) タグがブラックボックスで、こちらのアプリが解釈できない／安定検出できない
2) 追跡・悪用（持ち主の追跡、偽タグでの誤誘導）
3) “タグがある＝見つかる”という過信を招く（期待値管理が必要）

### 7. 既存設計への影響（侵食度）
- 侵食度: Mid
- 影響範囲: BLE受信・識別ロジック / UX（登録・探索）/ セキュリティ設計
- 後方互換: 既存ビーコン方式に追加する形で併存可能
- SSOT/責務分離: 「観測→正規化→推定→共有」を既存パイプラインに合流させる設計が必要

### 8. 最小実験（PoC）計画（最短で嘘を潰す）
- 目的: “タグが救助用途で観測可能か／意味が取れるか”を即判定
- 手順:
  1) 市販タグを1〜2種類用意（可能なら「汎用BLE広告」タイプを優先）
  2) Android/iOSそれぞれでスキャンアプリ（自作/既存）で広告を観測
  3) 広告が安定して見えるか、IDが固定か、ローテーションするかを確認
  4) 距離別（1m/5m/10m）に検出率とRSSIのばらつきを記録
- 成功判定:
  - 近距離で安定検出（体感でなく、一定回数中の検出率で判断）
  - ルートAの候補なら、広告から識別に使えるデータが抽出できる
- 必要物: タグ2個、iPhone/Android各1、屋内/屋外の短時間試験場所

### 9. メモ
- 位置推定は「タグID解釈ができるか」と「RSSIで誘導できるか」で方向性が分かれる
- ブラックボックスタグの場合は“存在検出のみ”で、本人特定は別手段（家族情報・最終目撃）と組み合わせが現実的

### 10. 結論（現時点）
- 次の一手: **PoCで「広告が読めるか／安定検出できるか」を先に確定する**（読めないならルートBへ、検出不安定ならRejected）

---

## IDEA-0002: 「BLEメッシュ（またはメッシュ的ストア＆フォワード）で通信断を越える」
- 状態: Draft
- 優先度: P0〜P1（成立すれば強いが難度高）
- 追加対象フェーズ: 発災直後 / 捜索・救助
- 作成日: 2026-01-30
- 作成者: Assistant（ユーザ起点アイデアを補完）

### 1. ねらい（1〜2行）
- 通信インフラが死んだ状況でも、端末同士の近接接触を使って情報を運び、救助情報の“届かない”を減らす。
- 「最後に確認された場所」「要救助者メッセージ」を、出会い頭にリレーして広げる。

### 2. ざっくり案（どう動く？）
**ユーザ視点**
1) 平時にアプリを入れておく（協力者/一般利用者）
2) 災害時、アプリは“近くの端末とすれ違うだけ”で情報交換（ユーザ操作は最小）
3) ネットが復旧・または中継拠点に到達すると、情報が集約される

**システム視点（2案）**
- 案A: Bluetooth SIG BLE Meshの利用（ただし端末/OS制約が壁）
- 案B: **“メッシュ的”ストア＆フォワード**（遅延耐性ネットワーク）
  - 端末は小容量メッセージを保持（Store）
  - 近接で交換（Forward）
  - 重複排除・TTL・署名検証で健全性を保つ

### 3. 前提・依存
- OSバックグラウンド制約の範囲で「発見・接続・転送」が成立すること
- 電池消費が許容範囲に収まること（スキャン頻度戦略が鍵）
- 悪用耐性（スパム/偽情報/追跡）を設計できること

### 4. 成立条件（採用ゲート：Yes/No）
- 近接交換が成立: 端末同士が一定条件で自動交換できる（最低でも前景時に確実）
- 電池: “災害時に使い続けられる”スキャン/広告設定がある
- 偽情報耐性: メッセージは署名検証でき、改ざん・なりすましが検出できる
- スパム耐性: 容量制限・優先度・レート制限・ブラックリスト等で破綻しない
- プライバシー: 追跡されにくい識別（ローテーション、匿名化）を採用できる

### 5. 期待できる効果
- “圏外”でも情報が動く（救助要請・生存情報・目撃情報の伝播）
- 物資配布所や避難所など“人が集まる点”で自然に集約されやすい

### 6. 主なリスク（上位3つ）
1) OS制約でバックグラウンド動作が成立しない／端末間交換が不安定
2) 電池が持たず、災害時に早期に機能停止
3) 悪用（デマ・なりすまし・追跡・スパム）で現場を混乱させる

### 7. 既存設計への影響（侵食度）
- 侵食度: High（通信層・データモデル・セキュリティが大きく増える）
- 影響範囲: 端末間プロトコル / 署名鍵管理 / メッセージキュー / 同期・重複排除
- 後方互換: サーバ中心方式と併存は可能（オンライン時はサーバ、オフライン時はS&F）

### 8. 最小実験（PoC）計画（最短で嘘を潰す）
- 目的: “端末間で自動（または準自動）交換が成立するか”を最初に確定
- 手順:
  1) Android同士で、BLE広告＋GATT接続で小メッセージ転送の最小実装
  2) 端末2台→3台で、A→B→Cのリレーができるか確認（重複排除なしでOK）
  3) 同じことをiOS絡み（iOS-iOS / iOS-Android）でどこまで可能か範囲確認
  4) 電池・接触時間（数秒のすれ違い）で実用性があるか測る
- 成功判定:
  - すれ違い数秒で、数百バイト〜数KBの転送が現実的に起こる
  - リレーが再現できる（ログで確認）
- 必要物: 端末3台（Android優先）、移動テスト（屋内/屋外）

### 9. メモ
- “BLE Mesh規格”にこだわらず、まずはS&Fとして成立性を検証するのが現実的
- 最初のKPIは「到達率」より先に「交換成立性・電池・悪用耐性の設計可能性」

### 10. 結論（現時点）
- 次の一手: **Android同士でS&Fの最小PoCを作り、交換成立性と接触時間の限界を測る**

## IDEA-0003: 「痕跡（footprint）情報の高信頼化（改ざん検知＋外部アンカー）」

* 状態: Draft
* 優先度: P1（有用だが運用/設計コストあり）
* 追加対象フェーズ: 平時 / 捜索・救助 / 事後検証
* 作成日: 2026-01-31
* 作成者: Assistant（ユーザ起点アイデアを補完）

### 1. ねらい（1〜2行）

* 痕跡データが「改ざんされていない」「その時点で存在していた」を第三者が検証できる形にして、救助・事後検証での信頼性を上げる。
* サーバ/運用者への不信や、受け渡し（チェーン・オブ・カストディ）の説明コストを下げる。

### 2. ざっくり案（どう動く？）

**基本方針（重要）**

* “ブロックチェーン採用”を目的にしない。目的は **外部検証可能な改ざん耐性**。
* コアは **オフライン完結**（災害時の通信断と矛盾しない）で設計し、オンライン時のみ外部アンカーを任意追加する。

**システム視点（2層構え）**

* コア（オフライン必須）:

  * 各痕跡レコードに `content_hash` を付与
  * 連続する痕跡は `prev_hash` を含めて **hash chain** を形成（欠落/改ざん検知）
  * 端末鍵で **署名（device signature）**し、作成主体のなりすましを検出
* オプション（オンライン時のみ）:

  * 一定期間/一定件数の痕跡束の **ルートハッシュ（例: Merkle root）** を作る
  * 外部の不可逆ログ（＝改ざん困難な台帳）へ **アンカー**して「その時点で存在」を固定

    * 例: 公開チェーン/透明性ログ/第三者タイムスタンプ等（採否は後で）

### 3. 前提・依存

* 端末側で鍵管理（生成/保護/ローテーション）ができること
* “時刻”は端末時刻を絶対視できない前提で扱うこと（必要なら後で設計）
* 外部アンカーを使う場合は、依存先の継続性・費用・運用体制が必要

### 4. 成立条件（採用ゲート：Yes/No）

* 改ざん検知: 痕跡の1bit改変や欠落が、検証で確実に検出できる（hash chain + 署名）
* オフライン成立: 通信断でも痕跡生成・保持・検証が成立する（外部アンカー必須にしない）
* 共有成立: 痕跡束を第三者へ渡しても、検証手順が再現できる（検証情報が同梱される）
* プライバシー: 外部アンカーに載せる情報が **ハッシュ等の最小情報**に抑えられる
* 運用可能性: 平時の長期運用でコスト/複雑さが破綻しない（鍵紛失や端末更新も想定）

### 5. 期待できる効果

* 痕跡の真正性（改ざんされていない）の説明力が上がる
* サーバ運用者が疑われる状況でも、第三者検証に耐えやすい
* 受け渡し履歴（誰がいつ持っていたか）を、追加設計次第で強化できる

### 6. 主なリスク（上位3つ）

1. **端末侵害**：端末が乗っ取られると「署名付きの嘘」を作られる（検証は通る）
2. **鍵管理の難しさ**：紛失・ローテーション・復旧が運用負債になりやすい
3. **外部依存の重さ**：公開チェーン等に寄せるほど、費用/継続性/社会実装の制約が増える

### 7. 既存設計への影響（侵食度）

* 侵食度: Low〜Mid（コアを「署名＋hash chain」に限定する場合）
* 影響範囲: データモデル（hash/署名フィールド追加） / 共有フォーマット / 検証ロジック
* 後方互換: 署名・検証情報を “追加メタデータ” 扱いにすれば併存しやすい
* SSOT/責務分離: 「生成（端末）」「検証（集計/プラットフォーム）」を分離できると保守しやすい

### 8. 最小実験（PoC）計画（最短で嘘を潰す）

* 目的: “ブロックチェーン抜き”で、改ざん検知と第三者検証が成立するかを先に確定
* 手順:

  1. 痕跡レコード列に対して hash chain を構成（`prev_hash` を含める）
  2. 任意の1レコードを改変/削除して、検証で検出できることを確認
  3. 痕跡束を別端末/別環境に渡して、同じ検証結果が出ることを確認
  4. （任意）オンライン時のみ“アンカー相当”として、ルートハッシュをどこかに記録して照合するフローを模擬
* 成功判定:

  * 改変/欠落が確実に検出でき、検証が第三者環境でも再現できる
  * オフラインでも痕跡生成が止まらない（アンカー必須ではない）

### 9. メモ

* “高信頼化”の本体は暗号学的整合性（署名＋連鎖）で、ブロックチェーンは **外部アンカー手段の一候補**に留めるのが安全
* 「検証できる」ことと「真実である」ことは別（端末侵害や虚偽入力は別レイヤで扱う）

### 10. 結論（現時点）

* 次の一手: **コア仕様を「署名＋hash chain（オフライン必須）」に固定し、外部アンカーは"任意拡張"として切り出す前提で評価を続ける**

---

## IDEA-0004: 「操作ゼロ保証」をスマホ単体に置かず、OS組み込み群衆ネットワークへ逃がす

* 状態: Draft
* 優先度: P0（RISK-BLE-IOS-001 の直接的な解決候補）
* 追加対象フェーズ: 平時（準備）/ 発災直後 / 捜索・救助
* 作成日: 2026-02-05
* 作成者: ユーザ起点
* 関連リスク: RISK-BLE-IOS-001, IDEA-0001, IDEA-0002

### 1. ねらい（1〜2行）

* RISK-BLE-IOS-001（iOS BLE制約でアプリ層の操作ゼロ中継が保証できない）に対し、成立条件をアプリ層から **OS組み込み群衆ネットワーク**（Apple Find My / Google Find Hub）へ移すことで解決する。
* スマホ破損・操作不能でも、外部タグが生きていれば周囲端末が検出→位置更新される前提を作る。

### 2. ざっくり案（どう動く？）

**iOS**
* Find My network accessory program（MFi）互換の外部タグを footprint の"最後の砦"にする。
* スマホ破損/操作不能でもタグが生きていれば、周囲のApple端末が検出して位置が更新される前提へ。
* iOS 18.2+ の Share Item Location（更新されるWebリンク/7日失効）で救助窓口へ位置を渡す運用を設計する。

**Android**
* Find Hub（旧 Find My Device）互換タグも用意（FMDN仕様公開）。
* unknown tracker alerts 前提で悪用対策も同時に満たす。

**共通**
* 平時: タグをアプリに登録し、Share Item Location のリンクを救助窓口/家族に共有する導線を用意。
* 発災時: スマホが死んでもタグが電波を出し続け、周囲のOS群衆ネットワーク参加端末が中継。
* 救助側: 共有リンクまたは対象キー探索で最終位置を取得。

### 3. 前提・依存

* Apple Find My network accessory program への参加（MFi認証、または互換タグの利用）
* Google FMDN 仕様への準拠（仕様は公開済み）
* タグの電池寿命が実用的であること（数か月〜年単位）
* Share Item Location（iOS 18.2+）のAPI/運用制約（7日失効、リンク更新頻度等）
* unknown tracker alerts との共存設計（悪用対策を兼ねる）

### 4. 成立条件（採用ゲート：Yes/No）

* OS群衆NW到達: タグがFind My / Find Hub経由で位置更新される（OS側の保証に依存）
* 共有導線: Share Item Location または同等の仕組みで、救助窓口へ位置を渡せる
* 悪用耐性: unknown tracker alerts / ローテーション等で追跡悪用が抑制される
* 電池寿命: 災害時に必要な期間（少なくとも数日〜）タグが発信を継続できる
* コスト: タグの調達・配布コストが現実的である

### 5. 期待できる効果

* **RISK-BLE-IOS-001 の核心的解決**: 操作ゼロ保証の成立条件をアプリ層→OS層に移し、iOS/Android公平性の問題を解消
* **既存インフラの活用**: Apple/Googleが既に構築した数億台規模の群衆ネットワークに乗る（自前構築不要）
* **IDEA-0001 との統合**: 汎用BLEタグ案と方向性が一致し、Find My/Find Hub互換に絞ることで成立条件が明確化
* **平時導線の自然さ**: 「落とし物タグを持っておく」は既に一般認知があり、参加障壁が低い

### 6. 主なリスク（上位3つ）

1. **プラットフォーム依存**: Apple/Google のポリシー変更・API廃止で成立条件が崩れる（制御不能）
2. **MFi認証の壁**: Find My互換タグの自前開発にはMFi認証が必要で、取得の難度/時間が不確実
3. **Share Item Location の制約**: 7日失効・リンク数上限・更新頻度など、救助用途に十分かの検証が未了

### 7. 既存設計への影響（侵食度）

* 侵食度: Mid
* 影響範囲: タグ登録/管理UX / 共有導線設計 / 対象キー探索との統合 / 外部API連携
* 後方互換: 既存のアプリ層BLE機能と併存可能（タグは"追加の保険"として位置づけ）
* IDEA-0001 との関係: IDEA-0001 を Find My/Find Hub 互換に方向付ける形で統合可能

### 8. 最小実験（PoC）計画（最短で嘘を潰す）

* 目的: "OS群衆ネットワーク経由で、操作ゼロの位置更新が救助用途に耐えるか"を先に確定
* 手順:
  1. Find My互換タグ（市販AirTag等）とFind Hub互換タグをそれぞれ用意
  2. タグを置いた状態で、周囲端末なし/あり/移動シナリオでの位置更新頻度・精度を計測
  3. Share Item Location のリンクを第三者（救助窓口役）に共有し、位置取得の遅延・精度を確認
  4. unknown tracker alerts の発火条件を確認し、救助用途との衝突有無を検証
* 成功判定:
  * タグ単独（スマホ電源OFF）で、周囲端末経由の位置更新が数十分〜数時間以内に発生する
  * 共有リンク経由で第三者が位置を取得できる
  * unknown tracker alerts が救助運用を阻害しないことが確認できる

### 9. メモ

* RISK-BLE-IOS-001 の比較表で示した通り、Apple「探す」/Google Find Hub は既に「操作ゼロ＋常時性」を OS層で実現済み。footprint がこれに"乗る"のは、車輪の再発明を避ける合理的な選択。
* ただし、プラットフォーム依存は「制御できないリスク」であり、専用ハードウェア（ココヘリ型）との併用も視野に入れるべき。
* IDEA-0001（汎用BLEタグ）、IDEA-0002（BLEメッシュ）とは排他ではなく補完関係。タグ＝OS群衆NW層、アプリ＝ベストエフォートBLE層、として多層防御にできる。

* 参照: `research-minimum-external-evidence.md`

### 10. 結論（現時点）

* 次の一手: **市販 Find My / Find Hub 互換タグで「スマホ電源OFF時の位置更新頻度/精度」と「Share Item Location の救助用途適合性」を検証する PoCを実施**

